<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏≠‡∏≠‡∏Å‡∏á‡∏≤‡∏ô</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
  <style>
    body {
      background: linear-gradient(135deg, #feda75, #fa7e1e, #d62976, #962fbf, #4f5bd5);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
    }

    @keyframes gradientBG {
      0% {
        background-position: 0% 50%;
      }

      50% {
        background-position: 100% 50%;
      }

      100% {
        background-position: 0% 50%;
      }
    }

    #loadingOverlay {
      display: none;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgb(255 255 255 / 80%);
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    @keyframes blink {
      0%,
      100% {
        opacity: 1;
      }

      50% {
        opacity: 0.5;
      }
    }

    .blink {
      animation: blink 1s infinite;
    }

    .glass {
      backdrop-filter: blur(12px);
      background-color: rgba(255, 255, 255, 0.6);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .ig-button {
      background: linear-gradient(135deg, #feda75, #fa7e1e, #d62976, #962fbf, #4f5bd5);
      color: white;
      font-weight: bold;
      transition: transform 0.2s;
    }

    .ig-button:hover {
      transform: scale(1.02);
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.2);
    }

    .input-field {
      background-color: rgba(255, 255, 255, 0.8);
    }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center px-2">
  <div class="max-w-md w-full p-6 rounded-2xl shadow-lg glass">
    <div class="mb-1 text-center text-xl font-semibold text-purple-800">üëãüèª ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì</div>
    <input type="text" id="displayName" name="displayName" class="input-field w-full p-[1px] text-[8px] mb-1 rounded border border-gray-300" />
    <div class="text-center text-lg font-bold text-pink-600 mb-4">üèÜ‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏Å‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏Ü‡πà‡∏≤‡∏Ñ‡∏ô</div>

    <div class="bg-white bg-opacity-60 border rounded-lg text-center py-6 mb-6">
      <div id="date" class="text-md text-gray-800 mb-2"></div>
      <div id="time" class="text-5xl font-extrabold text-pink-600"></div>
      <input type="date" id="todayInput" name="todayInput" class="hidden" />
      <input type="time" id="currentTime" name="currentTime" class="hidden" />
    </div>

    <!-- Step 1 -->
    <div id="step1">
      <div id="loadingOverlay" class="flex items-center justify-center">
        <div class="text-gray-800 font-semibold">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠..</div>
      </div>

      <input type="text" id="columnBData" name="columnBData" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•"class="input-field w-full p-[1px] text-[8px] mb-[1px] rounded border border-gray-300 leading-none" required />
      <input type="text" id="columnCData" name="columnCData" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô"class="input-field w-full p-[1px] text-[8px] mb-[1px] rounded border border-gray-300 leading-none" required />
      <input type="text" id="columnDData" name="columnDData" placeholder="‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"class="input-field w-full p-[1px] text-[8px] mb-[1px] rounded border border-gray-300 leading-none" required />
      <input type="hidden" id="userId" name="userId" />
      <input type="hidden" id="columnAData" name="columnAData" />

      <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á‡∏á‡∏≤‡∏ô -->
      <div class="switch-field mt-4 mb-4 space-y-2">
        <div class="flex items-center space-x-2 w-full">
          <input type="radio" id="radio-three" name="switch-job" value="‡πÄ‡∏Ç‡πâ‡∏≤‡∏á‡∏≤‡∏ô" class="hidden peer" />
          <label for="radio-three" class="transition-all duration-200 peer-checked:bg-gradient-to-r peer-checked:from-pink-500 peer-checked:to-yellow-500 peer-checked:text-white border border-gray-300 px-4 py-3 rounded-lg w-full text-center cursor-pointer hover:scale-105 hover:shadow-md">‡πÄ‡∏Ç‡πâ‡∏≤‡∏á‡∏≤‡∏ô</label>
        </div>

        <div class="flex items-center space-x-2 w-full">
          <input type="radio" id="radio-four" name="switch-job" value="‡∏ä‡πà‡∏ß‡∏á‡∏ö‡πà‡∏≤‡∏¢" class="hidden peer" />
          <label for="radio-four" class="transition-all duration-200 peer-checked:bg-gradient-to-r peer-checked:from-purple-500 peer-checked:to-pink-500 peer-checked:text-white border border-gray-300 px-4 py-3 rounded-lg w-full text-center cursor-pointer hover:scale-105 hover:shadow-md">‡∏ä‡πà‡∏ß‡∏á‡∏ö‡πà‡∏≤‡∏¢</label>
        </div>

        <div class="flex items-center space-x-2 w-full">
          <input type="radio" id="radio-five" name="switch-job" value="‡∏≠‡∏≠‡∏Å‡∏á‡∏≤‡∏ô" class="hidden peer" />
          <label for="radio-five" class="transition-all duration-200 peer-checked:bg-gradient-to-r peer-checked:from-yellow-500 peer-checked:to-red-500 peer-checked:text-white border border-gray-300 px-4 py-3 rounded-lg w-full text-center cursor-pointer hover:scale-105 hover:shadow-md">‡∏≠‡∏≠‡∏Å‡∏á‡∏≤‡∏ô</label>
        </div>
      </div>

      <input type="hidden" id="jobInput" name="jobInput" required />
      <textarea id="noteInput" placeholder="Note" class="input-field w-full border border-gray-300 rounded-lg p-3 text-gray-700 mt-4"></textarea>
      <button class="w-full p-4 rounded-xl bg-gradient-to-r from-green-400 to-blue-500 text-white font-bold text-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300" onclick="nextStep()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
      </div>

    <!-- Step 2 -->
    <div id="step2" class="hidden text-center mt-6">
      <video id="camera-preview" width="100%" class="rounded-lg shadow-md mb-2" autoplay playsinline></video>
      <img id="preview" class="rounded-lg shadow-md mb-2" width="100%" alt="" required />
      <div class="flex justify-center space-x-2 mt-4">
        <button class="ig-button w-1/2 p-2 rounded-lg" id="start-camera-btn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á</button>
        <button class="ig-button w-1/2 p-2 rounded-lg" id="capture-btn" disabled>‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ</button>
      </div>
      <div class="flex justify-between mt-4">
        <button class="w-1/2 p-3 m-1 rounded-lg bg-gray-200" onclick="prevStep()">‡∏Å‡∏•‡∏±‡∏ö</button>
        <button class="w-1/2 p-3 m-1 rounded-lg bg-green-300" onclick="checkPictureAndNextStep()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
      </div>
    </div>

    <!-- Step 3 -->
    <div id="step3" class="hidden text-center mt-6">
      <button onclick="getLocation()" class="ig-button w-full p-3 rounded-lg blink">‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</button>
      <div id="locationInfo" class="bg-white bg-opacity-80 p-4 rounded-lg mt-4 shadow">
        <div class="flex justify-between text-sm text-gray-700">
          <p id="latitude">Latitude: </p>
          <p id="longitude">Longitude: </p>
        </div>
        <p id="fullAddress" class="text-sm text-gray-800">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</p>
      </div>

      <input type="hidden" id="latitudeInput" name="latitudeInput" />
      <input type="hidden" id="longitudeInput" name="longitudeInput" />
      <input type="hidden" id="fullAddressInput" name="fullAddressInput" required />

      <iframe id="mapIframe" class="rounded-lg shadow mt-4" width="100%" height="240" frameborder="0" style="border:0;" allowfullscreen="" aria-hidden="false" tabindex="0"></iframe>

      <div class="flex justify-between mt-4">
        <button class="w-1/3 p-3 rounded-lg bg-gray-200" onclick="prevStep()">‡∏Å‡∏•‡∏±‡∏ö</button>
        <button id="submitButton" class="ig-button w-2/3 p-3 rounded-lg" onclick="submitForm()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
      </div>
    </div>
  </div>
</body>
<script>

   // ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏Ñ‡πà‡∏≤ URL ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö Web App
    const WEB_APP_MEMBER_URL = 'https://script.google.com/macros/s/AKfycbxDpxZqliJAcwF5YXZeApOdoWj1OXtDFa54iMAECKaNQf1mXwPRE_yhi8G1Rj-nxLV2VA/exec ';
    const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbxOPOTCdmfclGOzIoHO4bYdecpfe45j-VLNqhofaC2W6HozgtG3rEICaWKp7lOlSu9wdQ/exec ';
    const LIFF_ID = '2006738214-Q2Yrq7M7'; // Liff ID

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå
    window.onload = async function () {
        await initializeLiff();
    };

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô LIFF (LINE Front-end Framework)
    async function initializeLiff() {
        try {
            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô LIFF ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ LIFF ID ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î
            await liff.init({ liffId: `${LIFF_ID}` });
            // ‡∏ñ‡πâ‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡∏à‡∏∞‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
            if (liff.isLoggedIn()) {
                getUserProfile();
            } else {
                // ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö ‡∏à‡∏∞‡∏û‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
                liff.login();
            }
        } catch (error) {
            // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô LIFF ‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏•‡πá‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏ã‡∏•
            console.error('Error initializing LIFF:', error);
        }
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏≤‡∏Å LIFF
    async function getUserProfile() {
        try {
            // ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
            const profile = await liff.getProfile();
            const userId = profile.userId;
            // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤ userId ‡πÅ‡∏•‡∏∞ displayName ‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°
            document.getElementById('userId').value = userId;
            document.getElementById('displayName').value = profile.displayName;
            // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ userId
            await fetchData(userId);
        } catch (error) {
            // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå ‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏•‡πá‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏ã‡∏•
            console.error('Error getting profile data:', error);
        }
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏à‡∏≤‡∏Å Google Apps Script ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ userId
    async function fetchData(userId) {
        showLoading(true); // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÇ‡∏´‡∏•‡∏î
        try {
            // ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÑ‡∏õ‡∏¢‡∏±‡∏á Google Apps Script ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            const response = await fetch(`${WEB_APP_MEMBER_URL}`, {
                method: 'POST',
                body: JSON.stringify({ action: 'fetchData', userId: userId })
            });
            const data = await response.json();
            // ‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà‡∏°‡∏µ userId ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
            const userRows = data.filter(row => row[1] === userId);
            if (userRows.length > 0) {
                // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ó‡∏µ‡πà 5) ‡∏à‡∏≤‡∏Å‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÑ‡∏õ‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏∏‡∏î
                userRows.sort((a, b) => new Date(b[6]) - new Date(a[6]));
                displayData(userRows[0]);  // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
            } else {
                // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö userId ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏ã‡∏•
                console.log('No data found for userId:', userId);
            }
        } catch (error) {
            // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏•‡πá‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏ã‡∏•
            console.error('Error fetching data:', error);
        } finally {
            showLoading(false); // ‡∏ã‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÇ‡∏´‡∏•‡∏î
        }
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å fetchData ‡∏•‡∏á‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°
    function displayData(row) {
        document.getElementById('columnAData').value = row[1] || '';
        document.getElementById('columnBData').value = row[2] || '';
        document.getElementById('columnCData').value = row[3] || '';
        document.getElementById('columnDData').value = row[4] || '';
        document.getElementById('columnEData').value = row[5] || '';
        document.getElementById('columnFData').value = row[6] || '';
        document.getElementById('columnQData').value = row[17] || '';
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏ã‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÇ‡∏´‡∏•‡∏î
    function showLoading(isLoading) {
        const overlay = document.getElementById('loadingOverlay');
        const inputs = document.querySelectorAll('.input-field');
        if (isLoading) {
            // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡∏∞‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ü‡∏¥‡∏•‡∏î‡πå input
            overlay.style.display = 'flex';
            inputs.forEach(input => input.disabled = true);
        } else {
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ü‡∏¥‡∏•‡∏î‡πå input
            overlay.style.display = 'none';
            inputs.forEach(input => input.disabled = false);
        }
    }

    // ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    const url = `${WEB_APP_URL}`;
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const columnBData = document.querySelector("#columnBData");
    const columnCData = document.querySelector("#columnCData");
    const jobInput = document.querySelector("#jobInput");
    const noteInput = document.querySelector("#noteInput");
    const todayInput = document.querySelector("#todayInput");
    const currentTime = document.querySelector("#currentTime");
    const latitudeInput = document.querySelector("#latitudeInput");
    const longitudeInput = document.querySelector("#longitudeInput");
    const fullAddressInput = document.querySelector("#fullAddressInput");
    const userId = document.querySelector("#userId");
    const preview = document.getElementById('preview');

    document.addEventListener("DOMContentLoaded", function () {
        const video = document.getElementById("camera-preview");
        const startCameraBtn = document.getElementById("start-camera-btn");
        const captureBtn = document.getElementById("capture-btn");
        const previewImage = document.getElementById("preview");
        const dataForm = document.getElementById("data-form");
        let stream;

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°
        startCameraBtn.addEventListener("click", function () {
            startCamera();
        });

        // ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°
        captureBtn.addEventListener("click", function () {
            const canvas = document.createElement("canvas");
            const context = canvas.getContext("2d");
            // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á canvas ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö video
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            // ‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å video ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô preview
            context.drawImage(video, 0, 0, canvas.width, canvas.height);
            previewImage.src = canvas.toDataURL("image/png");
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á
            video.style.display = "none";
        });

        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠ submit form
        dataForm.addEventListener("submit", function (event) {
            event.preventDefault();
            const formData = new FormData(dataForm);
            const capturedImage = previewImage.src;
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢‡∏•‡∏á‡πÉ‡∏ô FormData
            formData.append("capturedImage", capturedImage);
            // ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
            // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà console
            for (const [key, value] of formData.entries()) {
                console.log(key, value);
            }
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ
            video.style.display = "none";
        });

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á
        function startCamera() {
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(function (videoStream) {
                    stream = videoStream;
                    video.srcObject = videoStream;
                    captureBtn.disabled = false; // ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ
                    video.style.display = "block"; // ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á
                })
                .catch(function (error) {
                    console.error("Error accessing the camera: ", error);
                });
        }
    });

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
    function checkPictureAndNextStep() {
        const capturedImage = document.getElementById('preview').src;
        if (!capturedImage || capturedImage.includes('No-Image-Placeholder')) {
            // ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ
            Swal.fire({
                title: '‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô!',
                text: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ',
                icon: 'warning',
                confirmButtonText: 'OK',
            });
        } else {
            // ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏´‡∏≤‡∏Å‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÅ‡∏•‡πâ‡∏ß
            nextStep();
        }
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°
    function submitForm() {
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
        if (!columnBData.value || !columnCData.value || !jobInput.value || !latitudeInput.value || !longitudeInput.value) {
            Swal.fire({
                title: '‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô!',
                text: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô (*) ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô',
                icon: 'warning',
                confirmButtonText: 'OK',
            });
            return; // ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
        }
        // ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        Swal.fire({
            title: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•',
            text: '‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•?',
            icon: 'question',
            showCancelButton: true,
            confirmButtonText: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô',
            cancelButtonText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å',
        }).then((result) => {
            if (result.isConfirmed) {
                // ‡∏õ‡∏¥‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥
                document.getElementById('submitButton').disabled = true;
                // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                Swal.fire({
                    title: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•',
                    text: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...',
                    showConfirmButton: false,
                    allowOutsideClick: false,
                    onBeforeOpen: () => {
                        Swal.showLoading();
                    }
                });
                let spt = preview.src.split("base64,")[1];
                let obj = {
                    base64: spt,
                    name: columnBData.value,
                    role: columnCData.value,
                    job: jobInput.value,
                    note: noteInput.value,
                    today: todayInput.value,
                    time: currentTime.value,
                    lat: latitudeInput.value,
                    long: longitudeInput.value,
                    address: fullAddressInput.value,
                    user: userId.value
                };
                fetch(url, {
                    method: "POST",
                    body: JSON.stringify(obj),
                })
                    .then(response => response.text())
                    .then(data => {
                        // ‡∏õ‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                        Swal.close();
                        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
                        Swal.fire({
                            title: '‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!',
                            text: '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!',
                            icon: 'success',
                            confirmButtonText: '‡∏õ‡∏¥‡∏î',
                        }).then(() => {
                            // ‡∏õ‡∏¥‡∏î LIFF (Line Front-end Framework)
                            sendFlexMessage();
                            console.log(data);
                        });
                    })
                    .catch(error => {
                        // ‡∏õ‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                        Swal.close();
                        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
                        Swal.fire({
                            title: 'Error!',
                            text: 'Form submission failed. Please try again.',
                            icon: 'error',
                            confirmButtonText: 'OK',
                        }).then(() => {
                            // ‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
                            document.getElementById('submitButton').disabled = false;
                        });
                        console.error(error);
                    });
            }
        });
    }

    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á LIFF (Line Front-end Framework)
    async function initializeLiff() {
        await liff.init({ liffId: `${LIFF_ID}` });

        if (liff.isLoggedIn()) {
            getUserProfile();
        } else {
            liff.login();
        }
    }

async function sendFlexMessage() {
    let jobColor = '';
    let lateMessage = '';
    const checkInTime = '08:30';
    const checkAfternoonTime = '13:30'; // ‡πÄ‡∏ß‡∏•‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö "‡∏ä‡πà‡∏ß‡∏á‡∏ö‡πà‡∏≤‡∏¢"
    const checkOutTime = '17:30'; // ‡πÄ‡∏ß‡∏•‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö "‡∏≠‡∏≠‡∏Å‡∏á‡∏≤‡∏ô"
    const currentTimeValue = currentTime.value; // ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö "HH:mm"

    if (jobInput.value === '‡πÄ‡∏Ç‡πâ‡∏≤‡∏á‡∏≤‡∏ô') {
        jobColor = '#0D9608FF'; // ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß
        if (isLate(currentTimeValue, checkInTime)) {
            const lateDetails = getLateDetails(currentTimeValue, checkInTime);
            lateMessage = `‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ç‡πâ‡∏≤‡∏á‡∏≤‡∏ô‡∏™‡∏≤‡∏¢ ${lateDetails.hours} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ${lateDetails.minutes} ‡∏ô‡∏≤‡∏ó‡∏µ`;
        }
    } else if (jobInput.value === '‡∏ä‡πà‡∏ß‡∏á‡∏ö‡πà‡∏≤‡∏¢') { // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö "‡∏ä‡πà‡∏ß‡∏á‡∏ö‡πà‡∏≤‡∏¢"
        jobColor = '#EF2F14FF'; // ‡∏™‡∏µ‡πÅ‡∏î‡∏á
        if (isLate(currentTimeValue, checkAfternoonTime)) {
            const lateDetails = getLateDetails(currentTimeValue, checkAfternoonTime);
            lateMessage = `‡∏Ñ‡∏∏‡∏ì‡∏ä‡πà‡∏ß‡∏á‡∏ö‡πà‡∏≤‡∏¢‡∏™‡∏≤‡∏¢ ${lateDetails.hours} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ${lateDetails.minutes} ‡∏ô‡∏≤‡∏ó‡∏µ`;
        }
    } else if (jobInput.value === '‡∏≠‡∏≠‡∏Å‡∏á‡∏≤‡∏ô') { // ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö "‡∏≠‡∏≠‡∏Å‡∏á‡∏≤‡∏ô"
        jobColor = '#000000FF'; // ‡∏™‡∏µ‡∏î‡∏≥ (‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏≠‡∏∑‡πà‡∏ô‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
        if (isLate(currentTimeValue, checkOutTime)) {
            const overtimeDetails = getLateDetails(currentTimeValue, checkOutTime);
            lateMessage = `‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≠‡∏Å‡∏á‡∏≤‡∏ô‡∏•‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ ${overtimeDetails.hours} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ${overtimeDetails.minutes} ‡∏ô‡∏≤‡∏ó‡∏µ`;
        }
    } else {
        jobColor = '#000000FF'; // ‡∏™‡∏µ‡∏î‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà "‡πÄ‡∏Ç‡πâ‡∏≤‡∏á‡∏≤‡∏ô", "‡∏ä‡πà‡∏ß‡∏á‡∏ö‡πà‡∏≤‡∏¢", ‡∏´‡∏£‡∏∑‡∏≠ "‡∏≠‡∏≠‡∏Å‡∏á‡∏≤‡∏ô"
    }

    const flexMessage = {
        type: 'flex',
        altText: '‡∏à‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏á‡∏≤‡∏ô',
        contents: {
            type: 'bubble',
            direction: 'ltr',
            body: {
                type: 'box',
                layout: 'vertical',
                spacing: 'md',
                contents: [
                    {
                        type: 'box',
                        layout: 'horizontal',
                        contents: [
                            {
                                type: 'text',
                                text: '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏á‡∏≤‡∏ô',
                                weight: 'bold',
                                size: 'md',
                                align: 'start',
                                margin: 'sm',
                                contents: [],
                            },
                            {
                                type: 'text',
                                text: ` ${jobInput.value}`,
                                weight: 'bold',
                                size: 'md',
                                color: jobColor,
                                align: 'end',
                                contents: [],
                            },
                        ],
                    },
                    {
                        type: 'separator',
                    },
                    {
                        type: 'box',
                        layout: 'vertical',
                        spacing: 'sm',
                        contents: [
                            {
                                type: 'box',
                                layout: 'baseline',
                                contents: [
                                    {
                                        type: 'text',
                                        text: '‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô',
                                        weight: 'bold',
                                        size: 'sm',
                                        margin: 'sm',
                                        contents: [],
                                    },
                                    {
                                        type: 'text',
                                        text: `${columnBData.value}`,
                                        size: 'sm',
                                        color: '#000000FF',
                                        align: 'end',
                                        contents: [],
                                    },
                                ],
                            },
                            {
                                type: 'box',
                                layout: 'baseline',
                                contents: [
                                    {
                                        type: 'text',
                                        text: '‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô',
                                        weight: 'bold',
                                        size: 'sm',
                                        flex: 0,
                                        margin: 'sm',
                                        contents: [],
                                    },
                                    {
                                        type: 'text',
                                        text: `${columnCData.value}`,
                                        size: 'sm',
                                        color: '#000000FF',
                                        align: 'end',
                                        contents: [],
                                    },
                                ],
                            },
                        ],
                    },
                    {
                        type: 'separator',
                    },
                    {
                        type: 'box',
                        layout: 'vertical',
                        contents: [
                            {
                                type: 'box',
                                layout: 'baseline',
                                contents: [
                                    {
                                        type: 'text',
                                        text: '‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà',
                                        weight: 'bold',
                                        contents: [],
                                    },
                                    {
                                        type: 'text',
                                        text: `${getFormattedDate(todayInput.value)}`,
                                        weight: 'bold',
                                        align: 'end',
                                        contents: [],
                                    },
                                ],
                            },
                            {
                                type: 'box',
                                layout: 'baseline',
                                contents: [
                                    {
                                        type: 'text',
                                        text: '‡πÄ‡∏ß‡∏•‡∏≤',
                                        weight: 'bold',
                                        contents: [],
                                    },
                                    {
                                        type: 'text',
                                        text: `${currentTime.value}`,
                                        weight: 'bold',
                                        size: 'xl',
                                        color: jobColor, // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏á‡∏≤‡∏ô
                                        align: 'end',
                                        contents: [],
                                    },
                                ],
                            },
                        ],
                    },
                    {
                        type: 'separator',
                    },
                    {
                        type: 'box',
                        layout: 'vertical',
                        spacing: 'xs',
                        margin: 'sm',
                        contents: [
                            {
                                type: 'text',
                                text: '‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà',
                                weight: 'bold',
                                size: 'sm',
                                margin: 'md',
                                contents: [],
                            },
                            {
                                type: 'text',
                                text: fullAddressInput.value ? `${fullAddressInput.value}` : '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏™‡∏î‡∏á ‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢',
                                wrap: true,
                                contents: [],
                            },
                        ],
                    },
                    lateMessage ? {
                        type: 'separator',
                    } : null,
                    lateMessage ? {
                        type: 'box',
                        layout: 'vertical',
                        spacing: 'xs',
                        margin: 'sm',
                        contents: [
                            {
                                type: 'text',
                                text: lateMessage,
                                weight: 'bold',
                                size: 'sm',
                                margin: 'md',
                                color: (jobInput.value === '‡∏≠‡∏≠‡∏Å‡∏á‡∏≤‡∏ô') ? '#0D9608FF' : '#EF2F14FF', // ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö "‡∏≠‡∏≠‡∏Å‡∏á‡∏≤‡∏ô", ‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö "‡∏ä‡πà‡∏ß‡∏á‡∏ö‡πà‡∏≤‡∏¢"
                                contents: [],
                            },
                        ],
                    } : null,
                ].filter(Boolean),
            },
        },
    };

    await liff.sendMessages([flexMessage]);
    liff.closeWindow();
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏•‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤
function isLate(currentTime, standardTime) {
    const [currentHour, currentMinute] = currentTime.split(':').map(Number);
    const [standardHour, standardMinute] = standardTime.split(':').map(Number);
    return (currentHour > standardHour) || (currentHour === standardHour && currentMinute > standardMinute);
}

function getLateDetails(currentTime, standardTime) {
    const [currentHour, currentMinute] = currentTime.split(':').map(Number);
    const [standardHour, standardMinute] = standardTime.split(':').map(Number);
    
    let totalMinutesCurrent = currentHour * 60 + currentMinute;
    let totalMinutesStandard = standardHour * 60 + standardMinute;
    
    let lateMinutes = totalMinutesCurrent - totalMinutesStandard;
    let hours = Math.floor(lateMinutes / 60);
    let minutes = lateMinutes % 60;
    
    return { hours, minutes };
}

function getFormattedDate(dateValue) {
    // ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏ï‡∏≤‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
    const date = new Date(dateValue);
    const day = String(date.getDate()).padStart(2, '0');
    const month = String(date.getMonth() + 1).padStart(2, '0'); // ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å 0
    const year = date.getFullYear();
    return `${day}/${month}/${year}`;
}


    function updateDateTime() {
        const dateElement = document.getElementById('date');
        const timeElement = document.getElementById('time');
        const now = new Date();

        const dateOptions = {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric',
        };

        const timeOptions = {
            hour: 'numeric',
            minute: 'numeric',
            second: 'numeric',
            hour12: false,
            timeZone: 'Asia/Bangkok'
        };

        const formattedDate = now.toLocaleDateString('th-TH', dateOptions);
        const formattedTime = now.toLocaleTimeString('en-US', timeOptions);

        dateElement.textContent = formattedDate;
        timeElement.textContent = formattedTime;
    }

    setInterval(updateDateTime, 1000);
    updateDateTime();

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏á‡∏≤‡∏ô
    document.querySelectorAll('input[name="switch-job"]').forEach(function (radio) {
        radio.addEventListener('change', function () {
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á input ‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤ jobInput ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
            document.getElementById('jobInput').value = this.value;

            // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ç‡∏≠‡∏á label ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡∏≤‡∏ô
            document.querySelectorAll('.switch-field label').forEach(function (label) {
                label.classList.remove('bg-slate-800', 'text-white');
            });
            document.querySelector(`label[for="${this.id}"]`).classList.add('bg-slate-800', 'text-white');
        });
    });

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏∂‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
    function getLocation() {
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ö‡∏£‡∏≤‡∏ß‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Geolocation ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
        if (navigator.geolocation) {
            // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
            navigator.geolocation.getCurrentPosition(displayLocation);
        } else {
            alert("Geolocation is not supported by this browser.");
        }
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
    function displayLocation(position) {
        // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏∞‡∏ï‡∏¥‡∏à‡∏π‡∏î‡πÅ‡∏•‡∏∞‡∏•‡∏≠‡∏á‡∏à‡∏¥‡∏à‡∏π‡∏î‡∏à‡∏≤‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á
        const latitude = position.coords.latitude;
        const longitude = position.coords.longitude;

        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏∞‡∏ï‡∏¥‡∏à‡∏π‡∏î‡πÅ‡∏•‡∏∞‡∏•‡∏≠‡∏á‡∏à‡∏¥‡∏à‡∏π‡∏î‡πÉ‡∏ô HTML
        document.getElementById("latitude").innerText = `Latitude: ${latitude}`;
        document.getElementById("longitude").innerText = `Longitude: ${longitude}`;

        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á input ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏•‡∏∞‡∏ï‡∏¥‡∏à‡∏π‡∏î‡πÅ‡∏•‡∏∞‡∏•‡∏≠‡∏á‡∏à‡∏¥‡∏à‡∏π‡∏î
        document.getElementById("latitudeInput").value = latitude;
        document.getElementById("longitudeInput").value = longitude;

        // ‡∏î‡∏∂‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏≤‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ reverse geocoding ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏•‡∏∞‡∏ï‡∏¥‡∏à‡∏π‡∏î‡πÅ‡∏•‡∏∞‡∏•‡∏≠‡∏á‡∏à‡∏¥‡∏à‡∏π‡∏î
        const reverseGeocodingUrl = `https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`;
        fetch(reverseGeocodingUrl)
            .then(response => response.json())
            .then(data => {
                if (data.display_name) {
                    // ‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏ö‡∏ö‡πÄ‡∏ï‡πá‡∏°‡πÉ‡∏ô HTML ‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤ input
                    const fullAddress = data.display_name;
                    document.getElementById("fullAddress").innerText = `‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: ${fullAddress}`;
                    document.getElementById("fullAddressInput").value = fullAddress;
                } else {
                    document.getElementById("fullAddress").innerText = "Unable to retrieve full address.";
                }
            })
            .catch(error => {
                console.error("Error fetching reverse geocoding data:", error);
                document.getElementById("fullAddress").innerText = "Error fetching reverse geocoding data.";
            });

        // ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≤‡∏Å Google Maps ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏•‡∏∞‡∏ï‡∏¥‡∏à‡∏π‡∏î‡πÅ‡∏•‡∏∞‡∏•‡∏≠‡∏á‡∏à‡∏¥‡∏à‡∏π‡∏î
        const mapsUrl = `https://www.google.com/maps?q=${latitude},${longitude}&output=embed`;
        document.getElementById("mapIframe").src = mapsUrl;
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÉ‡∏ô‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û
    function getCurrentTimeInBangkok() {
        const now = new Date();
        const bangkokTime = new Date(now.toLocaleString('en-US', { timeZone: 'Asia/Bangkok' }));

        // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö HH:MM
        const hours = String(bangkokTime.getHours()).padStart(2, '0');
        const minutes = String(bangkokTime.getMinutes()).padStart(2, '0');
        return `${hours}:${minutes}`;
    }

    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡πÉ‡∏ô input ‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤ currentTime
    document.getElementById('currentTime').value = getCurrentTimeInBangkok();

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏∂‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î
    function getFormattedDate() {
        const today = new Date();
        const year = today.getFullYear();
        const month = String(today.getMonth() + 1).padStart(2, '0');
        const day = String(today.getDate()).padStart(2, '0');

        return `${day}/${month}/${year}`;
    }

    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÉ‡∏ô input ‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤ todayInput
    document.getElementById('todayInput').value = getFormattedDate();

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
    let currentStep = 1;
    function nextStep() {
        // ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
        if (currentStep < 3) {
            document.getElementById(`step${currentStep}`).style.display = 'none';
            currentStep++;
            document.getElementById(`step${currentStep}`).style.display = 'block';
        }
    }

    function prevStep() {
        // ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
        if (currentStep > 1) {
            document.getElementById(`step${currentStep}`).style.display = 'none';
            currentStep--;
            document.getElementById(`step${currentStep}`).style.display = 'block';
        }
    }

</script>

</html>
